(function(f){f.fn.imageLoader=function(l){var e=f.extend({startSize:300,stepSize:300,prefix:"src",hideClass:"hide",imgPath:"",complete:function(c,a){return c}},l),g=function(c){var a=f(c),b=a.width(),d=a.height(),e=window.devicePixelRatio||1;return{el:c,$el:a,data:a.data(),bgImage:c.style.backgroundImage,max:Math.max(b,d)*e}},h=function(c,a,b){f(c).load(function(){c.setAttribute("draggable",!0);"function"===typeof b&&b(c,a)});c.complete&&(c.setAttribute("draggable",!0),"function"===typeof b&&b(c,
a))},k=function(c){for(var a=e.startSize,b=c.data[e.prefix+a],d=b;void 0!==b&&c.max>=a;)a+=e.stepSize,b=c.data[e.prefix+a],void 0!==b&&(d=b);return e.imgPath+d};return this.each(function(c,a){if("img"===a.tagName.toLowerCase()){var b=g(a),d=k(b);h(a,d,e.complete);b.$el.attr("src",d)}else d=g(a),b=k(d),""!==d.bgImage?a.style.backgroundImage='url("'+b+'")':(d=d.$el.find("img:eq(0)"),0<d.length&&(h(d.get(0),b,e.complete),d.attr("src",b)))})}})(jQuery);
